<container>

    <description><![CDATA[This is an example of a php WebServer configuration in xml]]></description>

    <server
            type="\TechDivision\WebServer\Servers\MultiThreadedServer"
            worker="\TechDivision\WebServer\Workers\ThreadWorker"
            socket="\TechDivision\WebServer\Sockets\StreamSocket"
            serverContext="\TechDivision\WebServer\ServerContext">

        <params>
            <param name="admin" type="string">www@localhost.localdomain</param>
            <param name="software" type="string">phpWebServer/0.1.0</param>
            <param name="transport" type="string">tcp</param>
            <param name="address" type="string">127.0.0.1</param>
            <param name="port" type="integer">9080</param>
            <param name="workerNumber" type="integer">64</param>
            <param name="documentRoot" type="string">/Library/WebServer/Documents</param>
        </params>

        <authentications>
            <authentication type="\TechDivision\WebServer\Authentication\BasicAuthentication">
                <params>
                    <param name="pattern" type="string">^\/xyz.*</param>
                    <!-- <param name="file" type="string"></param> -->
                    <param name="username" type="string">appserver</param>
                    <param name="password" type="string">wURpZpgIT.w1I</param>
                </params>
            </authentication>
        </authentications>

        <virtualHosts>

            <virtualHost name="htaccess.dev">
                <params>
                    <param name="admin" type="string">www@htaccess.dev</param>
                    <param name="documentRoot" type="string">/Library/WebServer/Documents/htaccessTest</param>
                </params>
            </virtualHost>
            <virtualHost name="phpwebserver.dev phpwebserver.local phpwebserver.test">
                <params>
                    <param name="admin" type="string">admin@phpwebserver.dev</param>
                    <!-- Note: it's intended to use a relative path to get content from webservers basedir/var/www -->
                    <param name="documentRoot" type="string">var/www</param>
                </params>
            </virtualHost>
        </virtualHosts>

        <rewrites>
            <rewrite condition="-f|-l|-d@$REQUEST_FILENAME" target="" flag="L"/>
            <rewrite condition="(.+)([/\?].+)" target="$1.do$2" flag="L"/>
            <rewrite condition="(.+)" target="$1.do" flag=""/>
        </rewrites>

        <connectionHandlers>
            <connectionHandler type="\TechDivision\Http\HttpConnectionHandler"/>
        </connectionHandlers>
        <modules>
            <module type="\TechDivision\WebServer\Modules\AuthenticationModule"/>
            <module type="\TechDivision\WebServer\Modules\VirtualHostModule"/>
            <module type="\TechDivision\WebServer\Modules\RewriteModule\Module"/>
            <module type="\TechDivision\WebServer\Modules\DirectoryModule"/>
            <module type="\TechDivision\WebServer\Modules\CoreModule"/>
            <module type="\TechDivision\WebServer\Modules\PhpModule"/>
        </modules>
        <handlers>
            <handler name="php" extension=".php"/>
            <handler name="php" extension=".phtml"/>
            <handler name="servlet" extension=".do"/>
        </handlers>
    </server>

    <server
            type="\TechDivision\WebServer\Servers\MultiThreadedServer"
            worker="\TechDivision\WebServer\Workers\ThreadWorker"
            socket="\TechDivision\WebServer\Sockets\StreamSocket"
            serverContext="\TechDivision\WebServer\ServerContext">

        <params>
            <param name="admin" type="string">www@localhost.localdomain</param>
            <param name="software" type="string">phpWebServer/0.1.0</param>
            <param name="workerNumber" type="integer">128</param>
            <param name="transport" type="string">ssl</param>
            <param name="address" type="string">127.0.0.1</param>
            <param name="port" type="integer">9443</param>
            <param name="certPath" type="string">etc/webserver.pem</param>
            <param name="passphrase" type="string">passphrase</param>
            <param name="documentRoot" type="string">/var/www</param>
        </params>

        <virtualHosts/>

        <authentications/>

        <connectionHandlers>
            <connectionHandler type="\TechDivision\Http\HttpConnectionHandler"/>
        </connectionHandlers>
        <modules>
            <module type="\TechDivision\WebServer\Modules\AuthenticationModule"/>
            <module type="\TechDivision\WebServer\Modules\VirtualHostModule"/>
            <module type="\TechDivision\WebServer\Modules\RewriteModule\Module"/>
            <module type="\TechDivision\WebServer\Modules\DirectoryModule"/>
            <module type="\TechDivision\WebServer\Modules\CoreModule"/>
            <module type="\TechDivision\WebServer\Modules\PhpModule"/>
        </modules>
        <handlers>
            <handler name="php" extension=".php"/>
            <handler name="php" extension=".phtml"/>
            <handler name="servlet" extension=".do"/>
        </handlers>
    </server>

</container>