<container>

    <description><![CDATA[This is an example of a php WebServer configuration in xml]]></description>

    <server
        type="\TechDivision\WebServer\Servers\MultiThreadedServer"
        worker="\TechDivision\WebServer\Workers\ThreadWorker"
        socket="\TechDivision\WebServer\Sockets\StreamSocket"
        serverContext="\TechDivision\WebServer\ServerContext">

        <params>
            <param name="admin" type="string">www@localhost.localdomain</param>
            <param name="software" type="string">phpWebServer/0.1.0</param>
            <param name="transport" type="string">tcp</param>
            <param name="address" type="string">0.0.0.0</param>
            <param name="port" type="integer">9080</param>
            <param name="workerNumber" type="integer">128</param>
            <param name="documentRoot" type="string">/var/www</param>
            <param name="errorsPageTemplatePath" type="string"/>
        </params>

        <authentications>
            <authentication uri="^\/auth\/basic\/phpwebserver.*">
                <params>
                    <param name="type" type="string">\TechDivision\WebServer\Authentication\BasicAuthentication</param>
                    <param name="realm" type="string">PhpWebServer Basic Authentication System</param>
                    <param name="hash" type="string">cGhwd2Vic2VydmVyOnBocHdlYnNlcnZlci5pMA==</param>
                    <!-- <param name="file" type="string">var/www/auth/basic/phpwebserver</param> -->
                    <!-- <param name="username" type="string">phpwebserver</param> -->
                    <!-- <param name="password" type="string">wURpZpgIT.w1I</param> -->
                </params>
            </authentication>
            <authentication uri="^\/auth\/basic\/appserver.*">
                <params>
                    <param name="type" type="string">\TechDivision\WebServer\Authentication\BasicAuthentication</param>
                    <param name="realm" type="string">appserver.io Basic Authentication System</param>
                    <param name="hash" type="string">YXBwc2VydmVyOmFwcHNlcnZlci5pMA==</param>
                    <!-- <param name="file" type="string">var/www/auth/basic/appserver</param> -->
                    <!-- <param name="username" type="string">appserver</param> -->
                    <!-- <param name="password" type="string">wURpZpgIT.w1I</param> -->
                </params>
            </authentication>
        </authentications>

        <virtualHosts>
            <virtualHost name="phpwebserver.dev phpwebserver.local phpwebserver.test">
                <params>
                    <param name="admin" type="string">admin@phpwebserver.dev</param>
                    <!-- Note: it's intended to use a relative path to get content from webservers basedir/var/www -->
                    <param name="documentRoot" type="string">var/www</param>
                    <param name="errorsPageTemplatePath" type="string">var/www/errors/error.phtml</param>
                </params>
                <rewrites>
                    <rewrite condition="-f|-l|-d" target="" flag="L"/>
                </rewrites>
            </virtualHost>
        </virtualHosts>

        <rewrites>
            <rewrite condition="-f|-l|-d" target="" flag="L"/>
        </rewrites>

        <connectionHandlers>
            <connectionHandler type="\TechDivision\Http\HttpConnectionHandler" />
        </connectionHandlers>

        <modules>
            <module type="\TechDivision\WebServer\Modules\AuthenticationModule"/>
            <module type="\TechDivision\WebServer\Modules\VirtualHostModule"/>
            <module type="\TechDivision\WebServer\Modules\RewriteModule\Module"/>
            <module type="\TechDivision\WebServer\Modules\DirectoryModule"/>
            <module type="\TechDivision\WebServer\Modules\CoreModule"/>
            <module type="\TechDivision\WebServer\Modules\PhpModule"/>
        </modules>
        <handlers>
            <handler name="php" extension=".php"/>
            <handler name="php" extension=".phtml"/>
            <handler name="servlet" extension=".do"/>
        </handlers>
    </server>

    <server
        type="\TechDivision\WebServer\Servers\MultiThreadedServer"
        worker="\TechDivision\WebServer\Workers\ThreadWorker"
        socket="\TechDivision\WebServer\Sockets\StreamSocket"
        serverContext="\TechDivision\WebServer\ServerContext">

        <params>
            <param name="admin" type="string">www@localhost.localdomain</param>
            <param name="software" type="string">phpWebServer/0.1.0</param>
            <param name="workerNumber" type="integer">128</param>
            <param name="transport" type="string">ssl</param>
            <param name="address" type="string">0.0.0.0</param>
            <param name="port" type="integer">9443</param>
            <param name="certPath" type="string">etc/webserver.pem</param>
            <param name="passphrase" type="string">passphrase</param>
            <param name="documentRoot" type="string">/var/www</param>
            <param name="errorsPageTemplatePath" type="string"/>
        </params>

        <virtualHosts>
            <virtualHost name="phpwebserver.dev phpwebserver.local phpwebserver.test">
                <params>
                    <param name="admin" type="string">admin@phpwebserver.dev</param>
                    <!-- Note: it's intended to use a relative path to get content from webservers basedir/var/www -->
                    <param name="documentRoot" type="string">var/www</param>
                    <param name="errorsPageTemplatePath" type="string">var/www/errors/error.phtml</param>
                </params>
                <rewrites>
                    <rewrite condition="-f|-l|-d" target="" flag="L"/>
                </rewrites>
            </virtualHost>
        </virtualHosts>

        <rewrites>
            <rewrite condition="-f|-l|-d" target="" flag="L"/>
        </rewrites>

        <authentications>
            <authentication uri="^\/auth\/basic\/phpwebserver.*">
                <params>
                    <param name="type" type="string">\TechDivision\WebServer\Authentication\BasicAuthentication</param>
                    <param name="realm" type="string">PhpWebServer Basic Authentication System</param>
                    <param name="hash" type="string">cGhwd2Vic2VydmVyOnBocHdlYnNlcnZlci5pMA==</param>
                    <!-- <param name="file" type="string">var/www/auth/basic/phpwebserver</param> -->
                    <!-- <param name="username" type="string">phpwebserver</param> -->
                    <!-- <param name="password" type="string">wURpZpgIT.w1I</param> -->
                </params>
            </authentication>
            <authentication uri="^\/auth\/basic\/appserver.*">
                <params>
                    <param name="type" type="string">\TechDivision\WebServer\Authentication\BasicAuthentication</param>
                    <param name="realm" type="string">appserver.io Basic Authentication System</param>
                    <param name="hash" type="string">YXBwc2VydmVyOmFwcHNlcnZlci5pMA==</param>
                    <!-- <param name="file" type="string">var/www/auth/basic/appserver</param> -->
                    <!-- <param name="username" type="string">appserver</param> -->
                    <!-- <param name="password" type="string">wURpZpgIT.w1I</param> -->
                </params>
            </authentication>
        </authentications>

        <connectionHandlers>
            <connectionHandler type="\TechDivision\Http\HttpConnectionHandler" />
        </connectionHandlers>

        <modules>
            <module type="\TechDivision\WebServer\Modules\AuthenticationModule"/>
            <module type="\TechDivision\WebServer\Modules\VirtualHostModule"/>
            <module type="\TechDivision\WebServer\Modules\RewriteModule\Module"/>
            <module type="\TechDivision\WebServer\Modules\DirectoryModule"/>
            <module type="\TechDivision\WebServer\Modules\CoreModule"/>
            <module type="\TechDivision\WebServer\Modules\PhpModule"/>
        </modules>
        <handlers>
            <handler name="php" extension=".php"/>
            <handler name="php" extension=".phtml"/>
            <handler name="servlet" extension=".do"/>
        </handlers>
    </server>

</container>
