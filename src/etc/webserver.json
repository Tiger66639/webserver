{
    "description": "This is an example of a php WebServer configuration in json",
    "servers": [
        {
            "type": "\\TechDivision\\WebServer\\Servers\\MultiThreadedServer",
            "worker": "\\TechDivision\\WebServer\\Workers\\ThreadWorker",
            "socket": "\\TechDivision\\WebServer\\Sockets\\StreamSocket",
            "serverContext" : "\\TechDivision\\WebServer\\ServerContext",
            "workerNumber": 32,

            "admin": "www@localhost.localdomain",
            "software": "phpWebServer/0.1.0",
            "transport": "tcp",
            "address": "0.0.0.0",
            "port": "9080",
            "documentRoot" : "var/www",
            "keepAliveMax": 64,
            "keepAliveTimeout": 16,
            "errorsPageTemplatePath": "",

            "authentications" : [
                {
                    "uri": "^\\/auth\\/basic\\/phpwebserver.*",
                    "realm": "PhpWebServer Basic Authentication System",
                    "type": "\\TechDivision\\WebServer\\Authentication\\BasicAuthentication",
                    "hash": "cGhwd2Vic2VydmVyOnBocHdlYnNlcnZlci5pMA=="
                },
                {
                    "uri": "^\\/auth\\/basic\\/appserver.*",
                    "realm": "appserver.io Basic Authentication System",
                    "type": "\\TechDivision\\WebServer\\Authentication\\BasicAuthentication",
                    "hash": "YXBwc2VydmVyOmFwcHNlcnZlci5pMA=="
                }
            ],

            "accesses" : [
                {
                    "type": "allow",
                    "REQUEST_URI": ".*"
                },
                {
                    "type": "deny",
                    "REQUEST_URI": "^\\/var\\/.*"
                }
            ],

            "virtualHosts" : [
                {
                    "name": "phpwebserver.dev phpwebserver.local phpwebserver.test",
                    "admin": "admin@phpwebserver.dev",
                    "documentRoot": "var/www",
                    "errorsPageTemplatePath": "var/www/errors/error.phtml",
                    "rewrites" : [
                        {
                            "condition" : "-f|-l|-d",
                            "target" : "",
                            "flag" : "L"
                        }
                    ],
                    "environmentVariables" : [
                        {
                            "condition" : "",
                            "definition" : "EXAMPLE_VARIABLE=test"
                        }
                    ]
                }
            ],

            "rewrites" : [
                {
                    "condition" : "-f|-l|-d",
                    "target" : "",
                    "flag" : "L"
                }
            ],
            "environmentVariables" : [
                {
                    "condition" : "(\\s.*WebKit?|Gecko)@$User-Agent",
                    "definition" : "BROWSER_ENGINE=$1"
                }
            ],

            "connectionHandlers": [
                "\\TechDivision\\Http\\HttpConnectionHandler"
            ],

            "modules": [
                "\\TechDivision\\WebServer\\Modules\\AuthenticationModule",
                "\\TechDivision\\WebServer\\Modules\\VirtualHostModule",
                "\\TechDivision\\WebServer\\Modules\\EnvironmentVariableModule",
                "\\TechDivision\\RewriteModule\\RewriteModule",
                "\\TechDivision\\WebServer\\Modules\\DirectoryModule",
                "\\TechDivision\\WebServer\\Modules\\AccessModule",
                "\\TechDivision\\WebServer\\Modules\\CoreModule",
                "\\TechDivision\\PhpModule\\PhpModule"
            ],

            "handlers": [
                { "name": "php", "extension": ".php" },
                { "name": "php", "extension": ".phtml" },
                { "name": "servlet", "extension": ".do" }
            ]
        },

        {
            "type": "\\TechDivision\\WebServer\\Servers\\MultiThreadedServer",
            "worker": "\\TechDivision\\WebServer\\Workers\\ThreadWorker",
            "socket": "\\TechDivision\\WebServer\\Sockets\\StreamSocket",
            "serverContext" : "\\TechDivision\\WebServer\\ServerContext",
            "workerNumber": 32,

            "admin": "www@localhost.localdomain",
            "software": "phpWebServer/0.1.0",
            "transport": "ssl",
            "address": "0.0.0.0",
            "port": "9443",
            "certPath": "etc/webserver.pem",
            "passphrase": "passphrase",
            "documentRoot": "var/www",
            "keepAliveMax": 64,
            "keepAliveTimeout": 16,
            "errorsPageTemplatePath": "",

            "authentications" : [
                {
                    "uri": "^\\/auth\\/basic\\/phpwebserver.*",
                    "realm": "PhpWebServer Basic Authentication System",
                    "type": "\\TechDivision\\WebServer\\Authentication\\BasicAuthentication",
                    "hash": "cGhwd2Vic2VydmVyOnBocHdlYnNlcnZlci5pMA=="
                },
                {
                    "uri": "^\\/auth\\/basic\\/appserver.*",
                    "realm": "appserver.io Basic Authentication System",
                    "type": "\\TechDivision\\WebServer\\Authentication\\BasicAuthentication",
                    "hash": "YXBwc2VydmVyOmFwcHNlcnZlci5pMA=="
                }
            ],

            "accesses" : [
                {
                    "type": "allow",
                    "REQUEST_URI": ".*"
                },
                {
                    "type": "deny",
                    "REQUEST_URI": "^\\/var\\/.*"
                }
            ],

            "virtualHosts" : [
                {
                    "name": "phpwebserver.dev phpwebserver.local phpwebserver.test",
                    "admin": "admin@phpwebserver.dev",
                    "documentRoot": "var/www",
                    "errorsPageTemplatePath": "var/www/errors/error.phtml",
                    "rewrites" : [
                        {
                            "condition" : "-f|-l|-d",
                            "target" : "",
                            "flag" : "L"
                        }
                    ],
                    "environmentVariables" : [
                        {
                            "condition" : "",
                            "definition" : "EXAMPLE_VARIABLE=test"
                        }
                    ]
                }
            ],

            "rewrites" : [
                {
                    "condition" : "-f|-l|-d",
                    "target" : "",
                    "flag" : "L"
                }
            ],
            "environmentVariables" : [
                {
                    "condition" : "(\\s.*WebKit?|Gecko)@$User-Agent",
                    "definition" : "BROWSER_ENGINE=$1"
                }
            ],

            "connectionHandlers": [
                "\\TechDivision\\Http\\HttpConnectionHandler"
            ],

            "modules": [
                "\\TechDivision\\WebServer\\Modules\\AuthenticationModule",
                "\\TechDivision\\WebServer\\Modules\\VirtualHostModule",
                "\\TechDivision\\WebServer\\Modules\\EnvironmentVariableModule",
                "\\TechDivision\\RewriteModule\\RewriteModule",
                "\\TechDivision\\WebServer\\Modules\\DirectoryModule",
                "\\TechDivision\\WebServer\\Modules\\AccessModule",
                "\\TechDivision\\WebServer\\Modules\\CoreModule",
                "\\TechDivision\\PhpModule\\PhpModule"
            ],

            "handlers": [
                { "name": "php", "extension": ".php" },
                { "name": "php", "extension": ".phtml" },
                { "name": "servlet", "extension": ".do" }
            ]
        }
    ]
}